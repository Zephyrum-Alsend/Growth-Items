scn aaZefirosSetXPReq

;Main script
;-----------------------------------------------------------------------------
;aaZefirosManager
;-----------------------------------------------------------------------------

;Used scripts
;-----------------------------------------------------------------------------
;-----------------------------------------------------------------------------

;Related scripts
;-----------------------------------------------------------------------------
;aaZefirosDefaultINI
;-----------------------------------------------------------------------------

;Used globals
;-----------------------------------------------------------------------------
;aaZefirosXPReq
;-----------------------------------------------------------------------------

;Related globals
;-----------------------------------------------------------------------------
;aaZefirosLevel
;-----------------------------------------------------------------------------

;Description
;-----------------------------------------------------------------------------
;Calculates and sets XPReq, then returns the half way point to the new XPReq.
;-----------------------------------------------------------------------------

;Parameters
;-----------------------------------------------------------------------------
short Lvl
short XPB
short XPM

long XPH ;Return value
;-----------------------------------------------------------------------------

;-----------------------------------------------------------------------------
begin Function { XPB, XPM, Lvl }
;-----------------------------------------------------------------------------

	;Calculate new XPReq
	Let aaZefirosXPReq := ( XPB * Lvl ) + ( XPM * Lvl * ( Lvl - 1 ) / 2 )
	
	;Calculate half way point
	Let Lvl -= 1
	Let XPH := ( (( XPB * Lvl ) + ( XPM * Lvl * ( Lvl - 1 ) / 2 )) + aaZefirosXPReq ) / 2

	
	SetFunctionValue XPH
	Return
;-----------------------------------------------------------------------------
end ;Function { XPB, XPM, Lvl }
;-----------------------------------------------------------------------------