scn aaDusfergonObjectB

;Main script
;-----------------------------------------------------------------------------
;aaDusfergonManager
;-----------------------------------------------------------------------------

;Used scripts
;-----------------------------------------------------------------------------
;aaDusfergonOnBowHit
;aaDusfergonOnBowRelease
;aaDusfergonForcePurge
;-----------------------------------------------------------------------------

;Related scripts
;-----------------------------------------------------------------------------
;aaDusfergonObject
;aaDusfergonObjectS
;aaDusfergonOnArrowHit
;-----------------------------------------------------------------------------

;Used globals
;-----------------------------------------------------------------------------
;aaDusfergonEquip
;-----------------------------------------------------------------------------

;Related globals
;-----------------------------------------------------------------------------
;-----------------------------------------------------------------------------

;Description
;-----------------------------------------------------------------------------
;Un/sets Equip flag and OnBowAttack event handler when un/equipping the Bow.
;Purge listeners on drop.
;-----------------------------------------------------------------------------

;Parameters
;-----------------------------------------------------------------------------
;-----------------------------------------------------------------------------



;-----------------------------------------------------------------------------
begin OnUnEquip Player
;-----------------------------------------------------------------------------

	Set aaDusfergonEquip to 0
	RemoveEventHandler "OnBowAttack" aaDusfergonOnBowHit
	RemoveEventHandler "OnRelease" aaDusfergonOnBowRelease
	
;-----------------------------------------------------------------------------
end ;OnUnequip Player
;-----------------------------------------------------------------------------



;-----------------------------------------------------------------------------
begin OnEquip Player
;-----------------------------------------------------------------------------

	Set aaDusfergonEquip to 1
	SetEventHandler "OnBowAttack" aaDusfergonOnBowHit "ref"::Player

;-----------------------------------------------------------------------------
end ;OnEquip Player
;-----------------------------------------------------------------------------



;-----------------------------------------------------------------------------
begin OnDrop Player
;-----------------------------------------------------------------------------

	Set aaDusfergonEquip to 0
	Call aaDusfergonForcePurge
	
;-----------------------------------------------------------------------------
end ;OnDrop Player
;-----------------------------------------------------------------------------