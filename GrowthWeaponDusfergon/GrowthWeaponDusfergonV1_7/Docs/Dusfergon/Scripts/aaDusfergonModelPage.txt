scn aaDusfergonModelPage

;Main script
;-----------------------------------------------------------------------------
;aaDusfergonManger
;-----------------------------------------------------------------------------

;Used scripts
;-----------------------------------------------------------------------------
;-----------------------------------------------------------------------------

;Related scripts
;-----------------------------------------------------------------------------
;aaDusfergonModelChange
;-----------------------------------------------------------------------------

;Used globals
;-----------------------------------------------------------------------------
;-----------------------------------------------------------------------------

;Related globals
;-----------------------------------------------------------------------------
;-----------------------------------------------------------------------------

;Description
;-----------------------------------------------------------------------------
;Given ModelChange's current menu index, page, option selected and weapon 
;type index, return which menu index to go to next.
;-----------------------------------------------------------------------------

;Parameters
;-----------------------------------------------------------------------------
short ModelChange ;Return value
short Button
short Page
short TypeIdx
;-----------------------------------------------------------------------------



;-----------------------------------------------------------------------------
begin Function { ModelChange, Button, Page, TypeIdx }
;-----------------------------------------------------------------------------

	;-----------------------------------------------------------------------------
	;Back/Prev
	;-----------------------------------------------------------------------------
	if ( Button == 1 )

		;-----------------------------------------------------------------------------
		;Previous page
		;-----------------------------------------------------------------------------
		if ( Page > 0 )

			Set ModelChange to ModelChange - 3

		;-----------------------------------------------------------------------------
		;Back to sub-type select
		;-----------------------------------------------------------------------------
		else

			Set ModelChange to 2

			if ( TypeIdx < aaDusfergonInit.Bastard1hIdx )

				Set aaDusfergonInit.Button to 1

			elseif ( TypeIdx < aaDusfergonInit.WarhammerIdx )

				Set aaDusfergonInit.Button to 2

			elseif ( TypeIdx < aaDusfergonInit.MaceIdx )

				Set aaDusfergonInit.Button to 3

			elseif ( TypeIdx < aaDusfergonInit.BowIdx )

				Set aaDusfergonInit.Button to 4

			else

				Set aaDusfergonInit.Button to 5

			endif
			
		endif

	;-----------------------------------------------------------------------------
	;Next
	;-----------------------------------------------------------------------------
	elseif ( Button == 9 )

		Set ModelChange to ModelChange + 1

	;-----------------------------------------------------------------------------
	;Selected a model
	;-----------------------------------------------------------------------------
	else

		Set aaDusfergonInit.IndexOffset to ( TypeIdx + ( 7 * Page ) )
		Set ModelChange to 100

	;-----------------------------------------------------------------------------
	endif ;if ( Button == 1 || Button == 9 )
	;-----------------------------------------------------------------------------


	SetFunctionValue ModelChange
	Return
;-----------------------------------------------------------------------------
end ;Function { ModelChange, Button, Page, TypeIdx }
;-----------------------------------------------------------------------------