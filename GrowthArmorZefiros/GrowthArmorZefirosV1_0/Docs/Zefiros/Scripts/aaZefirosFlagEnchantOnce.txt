scn aaZefirosFlagEnchantOnce

;Main script
;-----------------------------------------------------------------------------
;aaZefirosManager
;-----------------------------------------------------------------------------

;Used scripts
;-----------------------------------------------------------------------------
;aaZefirosOnEnchant
;aaZefirosUndoEnchanting
;-----------------------------------------------------------------------------

;Related scripts
;-----------------------------------------------------------------------------
;aaZefirosOnEnchanting
;-----------------------------------------------------------------------------

;Used globals
;-----------------------------------------------------------------------------
;-----------------------------------------------------------------------------

;Related globals
;-----------------------------------------------------------------------------
;-----------------------------------------------------------------------------

;Description
;-----------------------------------------------------------------------------
;Handles the warning flag for undoing player enchantments and related
;functions.
;-----------------------------------------------------------------------------

;Parameters
;-----------------------------------------------------------------------------
ref SoulGem
short SoulLevel
ref BaseItem
ref SoulItem
short Flag ;Return value
;-----------------------------------------------------------------------------



;-----------------------------------------------------------------------------
begin Function { SoulGem, SoulLevel, BaseItem, SoulItem, Flag }
;-----------------------------------------------------------------------------

	RemoveEventHandler "OnEnchant" aaZefirosOnEnchant

	if ( SoulItem == 0 )

		DebugPrint "Exited enchanting menu."
		Let Flag := 0

	else

		DebugPrint "Calling UndoEnchanting..."
		Let Flag -= Call aaZefirosUndoEnchanting SoulGem SoulLevel BaseItem SoulItem

	endif


	SetFunctionValue Flag
	Return
;-----------------------------------------------------------------------------
end ;Function { SoulGem, SoulLevel, BaseItem, SoulItem, Flag }
;-----------------------------------------------------------------------------