scn aaZefirosObject

;Main script
;-----------------------------------------------------------------------------
;aaZefirosManager
;-----------------------------------------------------------------------------

;Used scripts
;-----------------------------------------------------------------------------
;aaZefirosOnDamage
;aaZefirosOnMagicHit
;aaZefirosOnWeaponHit
;aaZefirosOnMagicApply
;aaZefirosCleanUp
;-----------------------------------------------------------------------------

;Related scripts
;-----------------------------------------------------------------------------
;aaZefirosOnUnEquip
;-----------------------------------------------------------------------------

;Used globals
;-----------------------------------------------------------------------------
;aaZefirosEquip
;-----------------------------------------------------------------------------

;Related globals
;-----------------------------------------------------------------------------
;-----------------------------------------------------------------------------

;Description
;-----------------------------------------------------------------------------
;Increments Equip flag when equipped by the Player, sets handlers if needed.
;Runs CleanUp when dropped by the Player.
;-----------------------------------------------------------------------------

;Parameters
;-----------------------------------------------------------------------------
;-----------------------------------------------------------------------------

;-----------------------------------------------------------------------------
begin OnEquip Player
;-----------------------------------------------------------------------------

	DebugPrint "Running OnEquip block."

	if ( aaZefirosEquip <= 0 )

		DebugPrint "aaZefirosEquip is %.0f, setting to 1 and setting handlers." aaZefirosEquip

		Let aaZefirosEquip := 0
		SetEventHandler "OnHealthDamage" aaZefirosOnDamage "object"::Player
		SetEventHandler "OnMagicEffectHit" aaZefirosOnMagicHit first::Player
		SetEventHandler "OnHitWith" aaZefirosOnWeaponHit first::Player
		SetEventHandler "OnMagicApply" aaZefirosOnMagicApply second::Player

	endif

	if ( aaZefirosEquip < 6 )

		Let aaZefirosEquip += 1

	endif

;-----------------------------------------------------------------------------
end
;-----------------------------------------------------------------------------

;-----------------------------------------------------------------------------
begin OnDrop Player
;-----------------------------------------------------------------------------

	DebugPrint "Running OnDrop block."
	Call aaZefirosCleanUp 0

;-----------------------------------------------------------------------------
end ;OnDrop Player
;-----------------------------------------------------------------------------