scn aaZefirosRefreshEquipped

;Main script
;-----------------------------------------------------------------------------
;aaZefirosManager
;-----------------------------------------------------------------------------

;Used scripts
;-----------------------------------------------------------------------------
;-----------------------------------------------------------------------------

;Related scripts
;-----------------------------------------------------------------------------
;aaZefirosRefreshUnEquip
;aaZefirosRefreshEquip
;-----------------------------------------------------------------------------

;Used globals
;-----------------------------------------------------------------------------
;-----------------------------------------------------------------------------

;Related globals
;-----------------------------------------------------------------------------
;-----------------------------------------------------------------------------

;Description
;-----------------------------------------------------------------------------
;Given an array of Items and an Actor, if the Actor has the item equipped, 
;re-equip.
;
;This function won't work for long after the game starts because of an engine
;bug. If UnEquipItem and EquipItem are run in the same frame, EquipItem fails.
;This bug does not happen for a brief time after loading a save.
;-----------------------------------------------------------------------------

;Parameters
;-----------------------------------------------------------------------------
ref Actor
ref Item

array_var Items
array_var Iter
;-----------------------------------------------------------------------------



;-----------------------------------------------------------------------------
begin Function { Actor, Items }
;-----------------------------------------------------------------------------

	ForEach Iter <- Items

		Let Item := *Iter
		
		if ( Actor.GetEquipped Item )

			DebugPrint "Re-equipping %n on %n." Item Actor
			Actor.UnequipItemSilent Item
			Actor.EquipItem2NS Item

		endif

	loop

	
	Return
;-----------------------------------------------------------------------------
end ;Function { Actor, Items }
;-----------------------------------------------------------------------------