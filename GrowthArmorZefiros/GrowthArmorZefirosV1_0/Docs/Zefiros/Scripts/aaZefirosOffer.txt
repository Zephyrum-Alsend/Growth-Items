scn aaZefirosOffer

;Main script
;-----------------------------------------------------------------------------
;aaZefirosManager
;-----------------------------------------------------------------------------

;Used scripts
;-----------------------------------------------------------------------------
;-----------------------------------------------------------------------------

;Related scripts
;-----------------------------------------------------------------------------
;aaZefirosSacrifice
;-----------------------------------------------------------------------------

;Used globals
;-----------------------------------------------------------------------------
;-----------------------------------------------------------------------------

;Related globals
;-----------------------------------------------------------------------------
;-----------------------------------------------------------------------------

;Description
;-----------------------------------------------------------------------------
;Menu prompt preceding Sacrifice.  Returns with 0 if Player accepts to Offer
;item, negative if a response hasn't been gotten yet, and positive if Player
;declines to Offer or Zefiros is capped and cannot grow anymore.
;-----------------------------------------------------------------------------

;Parameters
;-----------------------------------------------------------------------------
ref Item
short Capped
string_var Name
short Button

string_var Msg
;-----------------------------------------------------------------------------

;-----------------------------------------------------------------------------
begin Function { Capped, Name, Item, Button }
;-----------------------------------------------------------------------------

	if ( Capped != 0 )

		Let Msg := Name + " refuses further offerings."
		MessageBox $Msg
		sv_Destruct Msg

		SetFunctionValue 1 ;Any number greater than 0
		Return

	endif


	if ( Button == -2 )

		Let Msg := "Will you offer " + $Item + " to " + Name + "?"
		MessageBox $Msg "Yes" "No"
		sv_Destruct Msg

	endif

	if ( Button < 0 )

		Let Button := GetButtonPressed

	endif

	
	SetFunctionValue Button
	Return
;-----------------------------------------------------------------------------
end ;Function { Capped, Name, Item, Button }
;-----------------------------------------------------------------------------