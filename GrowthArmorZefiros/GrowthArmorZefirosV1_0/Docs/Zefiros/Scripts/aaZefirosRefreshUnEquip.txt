scn aaZefirosRefreshUnEquip

;Main script
;-----------------------------------------------------------------------------
;aaZefirosManager
;-----------------------------------------------------------------------------

;Used scripts
;-----------------------------------------------------------------------------
;-----------------------------------------------------------------------------

;Related scripts
;-----------------------------------------------------------------------------
;aaZefirosRefreshEquip
;-----------------------------------------------------------------------------

;Used globals
;-----------------------------------------------------------------------------
;-----------------------------------------------------------------------------

;Related globals
;-----------------------------------------------------------------------------
;-----------------------------------------------------------------------------

;Description
;-----------------------------------------------------------------------------
;Given an array of Items and an Actor, if the Actor has the item equipped, 
;unequip.  Return an array containing all the items successfully unequipped.
;-----------------------------------------------------------------------------

;Parameters
;-----------------------------------------------------------------------------
ref Actor
array_var Items

array_var Iter
array_var Equip ;Return value
ref Item
;-----------------------------------------------------------------------------



;-----------------------------------------------------------------------------
begin Function { Actor, Items }
;-----------------------------------------------------------------------------

	Let Equip := ar_Construct Array

	ForEach Iter <- Items

		Let Item := *Iter
		
		if ( Actor.GetEquipped Item )

			DebugPrint "Unequipping %n on %n." Item Actor
			Actor.UnequipItemSilent Item
			ar_Append Equip Item
			
		endif

	loop


	SetFunctionValue Equip
	Return
;-----------------------------------------------------------------------------
end ;Function { Actor, Items }
;-----------------------------------------------------------------------------