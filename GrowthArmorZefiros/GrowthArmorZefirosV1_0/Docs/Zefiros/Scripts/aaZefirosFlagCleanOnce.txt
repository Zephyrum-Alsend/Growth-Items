scn aaZefirosFlagCleanOnce

;Main script
;-----------------------------------------------------------------------------
;aaZefirosManager
;-----------------------------------------------------------------------------

;Used scripts
;-----------------------------------------------------------------------------
;aaZefirosCleanUp
;-----------------------------------------------------------------------------

;Related scripts
;-----------------------------------------------------------------------------
;-----------------------------------------------------------------------------

;Used globals
;-----------------------------------------------------------------------------
;-----------------------------------------------------------------------------

;Related globals
;-----------------------------------------------------------------------------
;-----------------------------------------------------------------------------

;Description
;-----------------------------------------------------------------------------
;When calling SetMerge, OnActorUnEquip runs instantly while OnEquip runs at
;the end of the frame.  This allows that frame to pass before correcting the
;fucked up Equip flag this incongruity creates.
;
;OnUnEquip runs at the end of the frame, but fails to trigger if a shield is
;swapped instead of just unequipped.
;OnActorEquip runs instantly but always runs twice for enchanted armor.
;-----------------------------------------------------------------------------

;Parameters
;-----------------------------------------------------------------------------
short Flag ;Return value
;-----------------------------------------------------------------------------



;-----------------------------------------------------------------------------
begin Function { Flag }
;-----------------------------------------------------------------------------

	if ( Flag == 2 )
	
		Call aaZefirosCleanUp 0
		Let Flag := 0
	
	elseif ( Flag == 1 )
	
		Let Flag := 2
	
	endif


	SetFunctionValue Flag
	Return
;-----------------------------------------------------------------------------
end ;Function { Flag }
;-----------------------------------------------------------------------------